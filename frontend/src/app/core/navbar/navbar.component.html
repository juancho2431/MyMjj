<nav class="bg-white shadow-md w-full h-20 md:h-32 sticky top-0 z-50 px-4 md:px-8">
  <div class="max-w-7xl mx-auto flex justify-between items-center h-full">
    <!-- Logo -->
    <div class="flex-shrink-0">
      <a routerLink="/">
        <img src="logo.png" alt="Logo M&M JJ SAS" class="w-36 md:w-44 max-w-full" />
      </a>
    </div>

    <!-- Botón hamburguesa (solo móvil) -->
    <button (click)="toggleMenu()" class="md:hidden text-primary text-3xl focus:outline-none">
      <span class="material-icons">{{ menuOpen ? 'close' : 'menu' }}</span>
    </button>

    <!-- Menú en escritorio -->
    <div class="hidden md:flex space-x-6 text-sm uppercase tracking-wide items-center font-medium">
      <a routerLink="/" routerLinkActive="text-primary" class="hover:text-primary transition">Inicio</a>
      <a routerLink="/nosotros" routerLinkActive="text-primary" class="hover:text-primary transition">Nosotros</a>

      <!-- Dropdown de Servicios -->
      <div class="relative group">
        <button class="hover:text-primary transition flex items-center gap-1 uppercase">
          Servicios
          <span class="material-icons text-sm">expand_more</span>
        </button>
        <div
          class="absolute left-0 right-0 md:right-auto mt-2 w-60 bg-white shadow-lg rounded-md p-4 max-h-80 overflow-y-auto opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all duration-200 z-50"
        >
          <a *ngFor="let servicio of services"
             [routerLink]="servicio.route"
             class="block text-sm text-greyDark hover:text-primary transition py-2">
            {{ servicio.title }}
          </a>
        </div>
      </div>

      <a routerLink="/proyectos" routerLinkActive="text-primary" class="hover:text-primary transition">Proyectos</a>
      <a routerLink="/contacto" routerLinkActive="text-primary" class="hover:text-primary transition">Contacto</a>
    </div>
  </div>

  <!-- Menú móvil colapsable -->
  <div *ngIf="menuOpen" class="md:hidden mt-3 px-4 py-4 space-y-4 text-sm uppercase font-medium bg-white shadow-lg max-h-[80vh] overflow-y-auto">
    <a routerLink="/" (click)="closeMenu()" class="block py-2 hover:text-primary">Inicio</a>
    <a routerLink="/nosotros" (click)="closeMenu()" class="block py-2 hover:text-primary">Nosotros</a>

    <!-- Dropdown servicios en mobile -->
    <div>
      <p (click)="toggleServicesMenu()" class="mb-2 py-2 flex items-center justify-between cursor-pointer">
        Servicios
        <span class="material-icons text-sm">{{ servicesMenuOpen ? 'expand_less' : 'expand_more' }}</span>
      </p>
      <div *ngIf="servicesMenuOpen" class="space-y-2 pl-3 border-l-2 border-greyLight">
        <a *ngFor="let servicio of services"
           [routerLink]="servicio.route"
           (click)="closeMenu()"
           class="block py-1 text-greyDark hover:text-primary text-xs tracking-normal">
          {{ servicio.title }}
        </a>
      </div>
    </div>

    <a routerLink="/proyectos" (click)="closeMenu()" class="block py-2 hover:text-primary">Proyectos</a>
    <a routerLink="/contacto" (click)="closeMenu()" class="block py-2 hover:text-primary">Contacto</a>
  </div>
</nav>